"use strict";(self.webpackChunkcrud_task=self.webpackChunkcrud_task||[]).push([[113],{2072:(e,r,t)=>{t.d(r,{A:()=>l});var a=t(6403),s=t(2992),n=t(4413);const i=a.A.create({baseURL:"https://reqres.in/api"});i.interceptors.request.use(e=>{const r=localStorage.getItem(n.A.TOKEN_KEY);return r&&(e.headers.Authorization="Bearer ".concat(r)),e.headers["Content-Type"]="application/json",e.headers["x-api-key"]="reqres-free-v1",e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(console.log("Unauthorized request, redirecting to login..."),(0,s.ri)()),Promise.reject(e)));const l=i},2992:(e,r,t)=>{t.d(r,{kg:()=>l,mg:()=>i,ri:()=>o});var a=t(4413),s=t(7862),n=t(2072);const i=e=>new Promise((r,t)=>{n.A.post(s.A.login,e).then(s=>{var n;const i=null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.token;i?(localStorage.setItem(a.A.TOKEN_KEY,i),localStorage.setItem("user",JSON.stringify(e.username)),r(i)):t(new Error("Login succeeded but no token returned"))}).catch(e=>{t(e)})}),l=e=>new Promise((r,t)=>{n.A.post(s.A.users,{data:e}).then(e=>{r(e.data)}).catch(e=>{t(e)})}),o=()=>{n.A.post(s.A.logout).then(()=>{localStorage.removeItem(a.A.TOKEN_KEY),window.location.href="/login"}).catch(e=>{console.error("Logout failed:",e)})}},3113:(e,r,t)=>{t.r(r),t.d(r,{default:()=>V});var a=t(5043),s=t(6160),n=t(7419),i=t(1645),l=t(9048),o=t(5492),c=t(2992),d=t(579);const u=()=>{const e=()=>{(0,c.ri)()},r=localStorage.getItem("user"),t=r?JSON.parse(r):"User";return(0,d.jsx)("header",{children:(0,d.jsx)(n.A,{justify:"end",align:"middle",className:"header",style:{padding:20},children:(0,d.jsx)(i.A,{children:(0,d.jsxs)("div",{className:"logout-btn",onClick:()=>e(),children:[(0,d.jsx)(l.A,{title:"Logout",children:(0,d.jsx)("span",{children:t})}),(0,d.jsx)(o.Ay,{type:"primary",icon:(0,d.jsx)(s.A,{}),danger:!0,size:"small",onClick:r=>{r.stopPropagation(),e()}})]})})})})};var m=t(898),g=t(6597),h=t(2685),p=t(3003),x=t(8817),f=t(2072),j=t(7862);const A=(e,r)=>async t=>{t((0,x.on)());try{var a;const s=await f.A.get(j.A.users,{params:{page:e,per_page:r}});t((0,x.eM)(s.data.data)),t((0,x.rJ)({current:e,pageSize:r,total:null!==(a=s.data.total)&&void 0!==a?a:s.data.data.length}))}catch(s){t((0,x.C7)(s.message))}},y=()=>{const e=(0,p.d4)(e=>e.usersReducer),{current:r,pageSize:t,total:a}=e.pagination,s=(0,p.wA)();return(0,d.jsx)("div",{style:{marginTop:16,textAlign:"center"},children:(0,d.jsx)(h.A,{current:r,pageSize:t,total:a,onChange:(e,r)=>{s((0,x.rJ)({current:e,pageSize:r||5,total:a})),s(A(e,r||5))},showSizeChanger:!1,simple:!1})})};var v=t(3359),b=t(1966);const w=e=>f.A.delete("".concat(j.A.users,"/").concat(e)).then(()=>(console.log("User with ID ".concat(e," deleted successfully.")),Promise.resolve())).catch(e=>Promise.reject(e));var C=t(9379),S=t(5645),E=t(4235),U=t(666),k=t(9602);function L(){const[e,r]=k.Ay.useNotification();return{api:e,contextHolder:r,open:(r,t)=>{var a,s,n;e[r]({message:null!==(a=null===t||void 0===t?void 0:t.message)&&void 0!==a?a:"Notification",description:null!==(s=null===t||void 0===t?void 0:t.description)&&void 0!==s?s:"",duration:null!==(n=null===t||void 0===t?void 0:t.duration)&&void 0!==n?n:4.5})}}}const P=e=>{let{isVisible:r,handleModalClose:t,userData:s}=e;const[n,i]=(0,a.useState)(!1),[l,u]=(0,a.useState)(!1),[m]=S.A.useForm(),h=(0,p.wA)(),{contextHolder:y,open:v}=L(),b=(0,a.useCallback)(e=>{h((0,x.on)()),f.A.get("".concat(j.A.users,"/").concat(e)).then(e=>{const r=e.data.data;m.setFieldsValue({fname:r.first_name,lname:r.last_name,email:r.email,profileUrl:r.avatar})}).finally(()=>{h((0,x.Bg)())})},[h,m]);(0,a.useEffect)(()=>{i(r),s&&r?(u(!0),b(s)):(u(!1),m.resetFields())},[r,s,b,m]);const w=()=>{i(!1),t(),m.resetFields()};return(0,d.jsxs)(d.Fragment,{children:[y,(0,d.jsx)(E.A,{title:l?"Edit User":"Create New User",open:n,forceRender:!0,onCancel:w,footer:null,children:(0,d.jsxs)(S.A,{form:m,layout:"vertical",autoComplete:"off",onFinish:e=>{h((0,x.on)());let r={email:e.email,first_name:e.fname,last_name:e.lname,avatar:e.profileUrl};l?(r=(0,C.A)((0,C.A)({},r),{},{id:null!==s&&void 0!==s?s:void 0}),f.A.put("".concat(j.A.users,"/").concat(s),r).then(e=>{e&&e.data&&(v("success",{message:"User updated successfully",description:"User ".concat(e.data.first_name," ").concat(e.data.last_name," has been updated.")}),h(A(1,5)))}).catch(e=>{v("error",{message:"Error updating user"}),console.error("Error updating user:",e)}).finally(()=>{h((0,x.Bg)()),i(!1),t(),m.resetFields()})):(0,c.kg)(r).then(e=>{e&&e.data&&(v("success",{message:"User created successfully",description:"User ".concat(e.data.first_name," ").concat(e.data.last_name," has been created.")}),h(A(1,5)))}).catch(e=>{v("error",{message:"Error creating user"}),console.error("Error creating user:",e)}).finally(()=>{h((0,x.Bg)()),i(!1),t(),m.resetFields()})},children:[(0,d.jsx)(S.A.Item,{name:"fname",label:"First Name",normalize:e=>"string"===typeof e?e.trim():e,rules:[{required:!0,message:"Please enter first name"},{min:2,message:"First name must be at least 2 characters"},{max:50,message:"First name cannot exceed 50 characters"},{pattern:/^[A-Za-z\s.'-]+$/,message:"First name contains invalid characters"}],children:(0,d.jsx)(U.A,{placeholder:"Please enter first name",maxLength:50})}),(0,d.jsx)(S.A.Item,{name:"lname",label:"Last Name",normalize:e=>"string"===typeof e?e.trim():e,rules:[{required:!0,message:"Please enter last name"},{min:1,message:"Last name must be at least 1 character"},{max:50,message:"Last name cannot exceed 50 characters"},{pattern:/^[A-Za-z\s.'-]+$/,message:"Last name contains invalid characters"}],children:(0,d.jsx)(U.A,{placeholder:"Please enter last name",maxLength:50})}),(0,d.jsx)(S.A.Item,{name:"email",label:"Email",normalize:e=>"string"===typeof e?e.trim():e,rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email address"}],children:(0,d.jsx)(U.A,{placeholder:"Please enter email",maxLength:254})}),(0,d.jsx)(S.A.Item,{name:"profileUrl",label:"Profile Image Url",normalize:e=>"string"===typeof e?e.trim():e,rules:[{required:!0,message:"Please enter profile image URL"},{validator:(e,r)=>{if(!r)return Promise.reject(new Error("Please enter profile image URL"));try{const e=new URL(r);return"http:"===e.protocol||"https:"===e.protocol?Promise.resolve():Promise.reject(new Error("URL must start with http:// or https://"))}catch(t){return Promise.reject(new Error("Please enter a valid URL"))}}}],children:(0,d.jsx)(U.A,{placeholder:"Please enter profile image URL",maxLength:2048})}),(0,d.jsxs)(g.A,{gap:10,justify:"flex-end",align:"center",children:[(0,d.jsx)(o.Ay,{onClick:w,children:"Cancel"}),(0,d.jsx)(o.Ay,{htmlType:"submit",type:"primary",children:l?"Update":"Submit"})]})]})})]})},z=()=>{const[e,r]=(0,a.useState)([]),[t,s]=(0,a.useState)(!1),[n,i]=(0,a.useState)(null),l=(0,p.d4)(e=>e.usersReducer),c=(0,p.wA)(),{contextHolder:u,open:h}=L();(0,a.useEffect)(()=>{r(l.users)},[l]);return(0,d.jsxs)(m.A,{direction:"vertical",style:{padding:20,backgroundColor:"#f0f2f5",width:"100%"},size:"large",children:[u,(0,d.jsx)(g.A,{wrap:"wrap",gap:30,justify:"center",children:e.map(e=>(0,d.jsxs)("div",{style:{background:"#fff",padding:20,borderRadius:8,minWidth:400,textAlign:"center",position:"relative"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("img",{src:e.avatar,alt:"avatar",style:{width:100,height:100,objectFit:"cover",borderRadius:"50%"}}),(0,d.jsx)("h3",{children:"".concat(e.first_name," ").concat(e.last_name)}),(0,d.jsx)("p",{children:e.email})]}),(0,d.jsx)("div",{className:"card-hover",children:(0,d.jsxs)(g.A,{justify:"center",align:"center",gap:10,style:{marginTop:10},children:[(0,d.jsx)(o.Ay,{type:"primary",shape:"circle",size:"large",onClick:()=>{return r=e.id,s(!0),void i(r);var r},style:{backgroundColor:"#b37feb"},icon:(0,d.jsx)(v.A,{})}),(0,d.jsx)(o.Ay,{type:"primary",danger:!0,shape:"circle",size:"large",onClick:()=>{return r=e.id,c((0,x.on)()),void w(r).then(()=>{h("success",{message:"User deleted successfully"}),c(A(l.pagination.current,l.pagination.pageSize))}).catch(e=>{h("error",{message:"Error deleting user"}),console.error("Error deleting user:",e)}).finally(()=>{c((0,x.Bg)())});var r},icon:(0,d.jsx)(b.A,{})})]})})]},e.id))}),(0,d.jsx)(g.A,{justify:"flex-end",align:"center",style:{padding:20},children:(0,d.jsx)(y,{})}),(0,d.jsx)(P,{isVisible:t,handleModalClose:()=>s(!1),userData:n})]})};var R=t(6603),_=t(865),I=t(4459),N=t(2970),F=t(4413);const{Search:B}=U.A,q=()=>{const[e,r]=a.useState("table"),[t,s]=a.useState(!1),[n,i]=(0,a.useState)(""),[l]=(0,N.d7)(n,F.A.DEBOUNCE_DELAY),c=(0,a.useRef)(!1),u=(0,p.d4)(e=>e.usersReducer),m=(0,p.wA)();(0,a.useEffect)(()=>{u.gridView?r("card"):r("table")},[u.gridView]),(0,a.useEffect)(()=>{c.current?c.current=!1:m((0,x.eR)(l))},[l,m]);return(0,d.jsxs)(a.Fragment,{children:[(0,d.jsxs)(g.A,{justify:"space-between",align:"center",style:{padding:20,backgroundColor:"#fff"},children:[(0,d.jsx)("h2",{children:"Users"}),(0,d.jsxs)(g.A,{gap:10,children:[(0,d.jsx)(B,{placeholder:"Search users",onSearch:e=>{c.current=!0,i(e),(e=>{var r;m((0,x.eR)(e)),e||m(A(1,null!==(r=u.pagination.pageSize)&&void 0!==r?r:5))})(e)},onChange:e=>i(e.target.value),enterButton:!0,allowClear:!0,style:{maxWidth:300},value:n}),(0,d.jsx)(o.Ay,{type:"primary",onClick:()=>{s(!0)},children:"Add User"})]})]}),(0,d.jsx)(g.A,{justify:"flex-start",align:"center",style:{paddingRight:20,paddingLeft:20},children:(0,d.jsx)(S.A.Item,{children:(0,d.jsxs)(R.Ay.Group,{value:e,onChange:e=>{const t=e.target.value;r(t),m((0,x.ee)("card"===t))},children:[(0,d.jsxs)(R.Ay.Button,{value:"table",children:[(0,d.jsx)(_.A,{})," Table"]}),(0,d.jsxs)(R.Ay.Button,{value:"card",children:[(0,d.jsx)(I.A,{})," Card"]})]})})}),(0,d.jsx)(P,{isVisible:t,handleModalClose:()=>s(!1)})]})};var D=t(7965);const K=()=>{const[e,r]=(0,a.useState)([]),[t,s]=(0,a.useState)(!1),[n,i]=(0,a.useState)(null),l=(0,p.d4)(e=>e.usersReducer),c=(0,p.wA)(),{contextHolder:u,open:h}=L();(0,a.useEffect)(()=>{r(l.users)},[l]);const f=[{title:"",dataIndex:"avatar",render:e=>(0,d.jsx)("img",{src:e,alt:"avatar",style:{width:40,borderRadius:"50%",marginLeft:60}})},{title:"Email",dataIndex:"email",sorter:!0,render:(e,r)=>(0,d.jsx)("div",{style:{color:"blue",cursor:"pointer"},children:"".concat(r.email)})},{title:"First Name",dataIndex:"first_name",sorter:!0,render:(e,r)=>(0,d.jsx)("div",{children:"".concat(r.first_name)})},{title:"Last Name",dataIndex:"last_name",sorter:!0,render:(e,r)=>(0,d.jsx)("div",{children:"".concat(r.last_name)})},{title:"Action",sorter:!1,dataIndex:"id",render:e=>(0,d.jsxs)(g.A,{justify:"center",align:"center",gap:10,children:[(0,d.jsx)(o.Ay,{type:"primary",onClick:()=>(e=>{s(!0),i(e)})(e),children:"Edit"}),(0,d.jsx)(o.Ay,{type:"primary",danger:!0,onClick:()=>(e=>{c((0,x.on)()),w(e).then(()=>{h("success",{message:"User deleted successfully",description:"User with ID ".concat(e," has been deleted.")}),c(A(l.pagination.current,l.pagination.pageSize))}).catch(e=>{h("error",{message:"Error deleting user"}),console.error("Error deleting user:",e)}).finally(()=>{c((0,x.Bg)())})})(e),children:"Delete"})]})}];return(0,d.jsxs)(m.A,{direction:"vertical",style:{width:"100%"},children:[u,(0,d.jsx)(D.A,{rowKey:"id",columns:f,dataSource:e,pagination:!1,onChange:(e,t,a)=>{if(!a||!a.order)return void r(l.users);const s=a.field||a.columnKey,n=a.order,i=[...l.users].sort((e,r)=>{var t,a;const n=null!==(t=e[s])&&void 0!==t?t:"",i=null!==(a=r[s])&&void 0!==a?a:"";return"string"===typeof n&&"string"===typeof i?n.toLowerCase().localeCompare(i.toLowerCase()):"number"===typeof n&&"number"===typeof i?n-i:String(n).localeCompare(String(i))});"descend"===n&&i.reverse(),r(i)}}),(0,d.jsx)(g.A,{justify:"flex-end",align:"center",children:(0,d.jsx)(y,{})}),(0,d.jsx)(P,{isVisible:t,handleModalClose:()=>s(!1),userData:n})]})};var T=t(7328);const V=()=>{const e=(0,p.wA)(),r=(0,p.d4)(e=>e.usersReducer),t=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{t.current||(t.current=!0,e(A(r.pagination.current,r.pagination.pageSize)))},[e,r.pagination]),(0,d.jsxs)("div",{children:[(0,d.jsx)(u,{}),(0,d.jsx)(q,{}),(0,d.jsx)("div",{style:{padding:40,backgroundColor:"#f0f2f5",minHeight:"100vh"},children:r.gridView?(0,d.jsx)(z,{}):(0,d.jsx)(K,{})}),(0,d.jsx)(T.h,{visible:r.loading})]})}},7862:(e,r,t)=>{t.d(r,{A:()=>a});const a={login:"/login",users:"/users",logout:"/logout"}}}]);
//# sourceMappingURL=113.ae3746b3.chunk.js.map
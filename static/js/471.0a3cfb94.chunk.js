"use strict";(self.webpackChunkcrud_task=self.webpackChunkcrud_task||[]).push([[471],{2072:(e,s,r)=>{r.d(s,{A:()=>i});var t=r(6403),a=r(2992),n=r(4413);const o=t.A.create({baseURL:"https://reqres.in/api"});o.interceptors.request.use(e=>{const s=localStorage.getItem(n.A.TOKEN_KEY);return s&&(e.headers.Authorization="Bearer ".concat(s)),e.headers["Content-Type"]="application/json",e.headers["x-api-key"]="reqres-free-v1",e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(console.log("Unauthorized request, redirecting to login..."),(0,a.ri)()),Promise.reject(e)));const i=o},2992:(e,s,r)=>{r.d(s,{kg:()=>i,mg:()=>o,ri:()=>l});var t=r(4413),a=r(7862),n=r(2072);const o=e=>new Promise((s,r)=>{n.A.post(a.A.login,e).then(a=>{var n;const o=null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.token;o?(localStorage.setItem(t.A.TOKEN_KEY,o),localStorage.setItem("user",JSON.stringify(e.username)),s(o)):r(new Error("Login succeeded but no token returned"))}).catch(e=>{r(e)})}),i=e=>new Promise((s,r)=>{n.A.post(a.A.users,{data:e}).then(e=>{s(e.data)}).catch(e=>{r(e)})}),l=()=>{n.A.post(a.A.logout).then(()=>{localStorage.removeItem(t.A.TOKEN_KEY),window.location.href="https://dineshkumarrangasamy1998.github.io/mallow_react_task_dineshkumar/"}).catch(e=>{console.error("Logout failed:",e)})}},4471:(e,s,r)=>{r.r(s),r.d(s,{default:()=>j});var t=r(5043),a=r(5492),n=r(8318),o=r(2513),i=r(1645),l=r(6597),c=r(5645),d=r(666),m=r(7419),u=r(7721),h=r(8617),g=r(2992),p=r(7328),A=r(5439),x=r(579);const j=()=>{const[e,s]=t.useState(!1),r=(0,A.Zp)(),[j]=c.A.useForm();return(0,x.jsxs)(t.Fragment,{children:[(0,x.jsx)(p.h,{visible:e}),(0,x.jsx)(m.A,{justify:"center",align:"middle",style:{minHeight:"100vh",background:"#f5f5f5"},children:(0,x.jsx)(i.A,{xs:22,sm:16,md:12,lg:8,xl:6,children:(0,x.jsx)(n.A,{title:"",variant:"borderless",style:{width:"fit-content",margin:"auto"},children:(0,x.jsxs)(c.A,{form:j,name:"horizontal_login",layout:"inline",onFinish:e=>{s(!0),(0,g.mg)(e).then(()=>{s(!1),r("/users")}).catch(()=>s(!1))},initialValues:{remember:!0},style:{width:"100%",margin:"auto",gap:"20px"},children:[(0,x.jsx)(c.A.Item,{name:"username",rules:[{required:!0,message:"Username is required"},{pattern:/^[\w.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,message:"Username must be a valid email format"}],style:{width:"100%"},children:(0,x.jsx)(d.A,{prefix:(0,x.jsx)(u.A,{}),placeholder:"Username"})}),(0,x.jsx)(c.A.Item,{name:"password",rules:[{required:!0,message:"Password is required"},{pattern:/^[A-Za-z0-9]{8,}$/,message:"Password must be at least 8 characters, letters/numbers only"}],style:{width:"100%"},children:(0,x.jsx)(d.A,{prefix:(0,x.jsx)(h.A,{}),type:"password",placeholder:"Password"})}),(0,x.jsx)(c.A.Item,{children:(0,x.jsx)(l.A,{justify:"flex-start",align:"center",children:(0,x.jsx)(c.A.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:(0,x.jsx)(o.A,{children:"Remember me"})})})}),(0,x.jsx)(c.A.Item,{style:{width:"100%"},children:(0,x.jsx)(a.Ay,{block:!0,type:"primary",htmlType:"submit",children:"Log in"})})]})})})})]})}},7862:(e,s,r)=>{r.d(s,{A:()=>t});const t={login:"/login",users:"/users",logout:"/logout"}}}]);
//# sourceMappingURL=471.0a3cfb94.chunk.js.map
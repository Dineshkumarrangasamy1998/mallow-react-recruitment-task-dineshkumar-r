"use strict";(self.webpackChunkcrud_task=self.webpackChunkcrud_task||[]).push([[471],{1494:(e,r,s)=>{s.d(r,{_:()=>n});var t=s(9602);function n(){const[e,r]=t.Ay.useNotification();return{api:e,contextHolder:r,open:(r,s)=>{var t,n,o;e[r]({message:null!==(t=null===s||void 0===s?void 0:s.message)&&void 0!==t?t:"Notification",description:null!==(n=null===s||void 0===s?void 0:s.description)&&void 0!==n?n:"",duration:null!==(o=null===s||void 0===s?void 0:s.duration)&&void 0!==o?o:4.5})}}}},2072:(e,r,s)=>{s.d(r,{A:()=>i});var t=s(6403),n=s(2992),o=s(4413);const a=t.A.create({baseURL:"https://reqres.in/api"});a.interceptors.request.use(e=>{const r=localStorage.getItem(o.A.TOKEN_KEY);return r&&(e.headers.Authorization="Bearer ".concat(r)),e.headers["Content-Type"]="application/json",e.headers["x-api-key"]="reqres-free-v1",e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(console.log("Unauthorized request, redirecting to login..."),(0,n.ri)()),Promise.reject(e)));const i=a},2992:(e,r,s)=>{s.d(r,{kg:()=>i,mg:()=>a,ri:()=>l});var t=s(4413),n=s(7862),o=s(2072);const a=e=>new Promise((r,s)=>{o.A.post(n.A.login,e).then(n=>{var o;const a=null===n||void 0===n||null===(o=n.data)||void 0===o?void 0:o.token;a?(localStorage.setItem(t.A.TOKEN_KEY,a),localStorage.setItem("user",JSON.stringify(e.username)),r(a)):s(new Error("Login succeeded but no token returned"))}).catch(e=>{s(e)})}),i=e=>new Promise((r,s)=>{o.A.post(n.A.users,{data:e}).then(e=>{r(e.data)}).catch(e=>{s(e)})}),l=()=>{o.A.post(n.A.logout).then(()=>{localStorage.removeItem(t.A.TOKEN_KEY),window.location.href="https://dineshkumarrangasamy1998.github.io/mallow_react_task_dineshkumar/"}).catch(e=>{console.error("Logout failed:",e)})}},4471:(e,r,s)=>{s.r(r),s.d(r,{default:()=>j});var t=s(5043),n=s(5492),o=s(8318),a=s(2513),i=s(1645),l=s(6597),d=s(5645),c=s(666),u=s(7419),m=s(7721),h=s(8617),g=s(2992),p=s(7328),A=s(5439),x=s(1494),v=s(579);const j=()=>{const[e,r]=t.useState(!1),s=(0,A.Zp)(),[j]=d.A.useForm(),{contextHolder:f,open:y}=(0,x._)();return(0,v.jsxs)(t.Fragment,{children:[(0,v.jsx)(p.h,{visible:e}),(0,v.jsx)(u.A,{justify:"center",align:"middle",style:{minHeight:"100vh",background:"#f5f5f5"},children:(0,v.jsx)(i.A,{xs:22,sm:16,md:12,lg:8,xl:6,children:(0,v.jsx)(o.A,{title:"",variant:"borderless",style:{width:"fit-content",margin:"auto"},children:(0,v.jsxs)(d.A,{form:j,name:"horizontal_login",layout:"inline",onFinish:e=>{r(!0),(0,g.mg)(e).then(()=>{r(!1),s("/users")}).catch(()=>{y("error",{message:"Login Failed: Invalid username or password"})}).finally(()=>{r(!1)})},initialValues:{remember:!0},style:{width:"100%",margin:"auto",gap:"20px"},children:[(0,v.jsx)(d.A.Item,{name:"username",rules:[{required:!0,message:"Username is required"},{pattern:/^[\w.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,message:"Username must be a valid email format"}],style:{width:"100%"},children:(0,v.jsx)(c.A,{prefix:(0,v.jsx)(m.A,{}),placeholder:"Username"})}),(0,v.jsx)(d.A.Item,{name:"password",rules:[{required:!0,message:"Password is required"},{pattern:/^[A-Za-z0-9]{8,}$/,message:"Password must be at least 8 characters, letters/numbers only"}],style:{width:"100%"},children:(0,v.jsx)(c.A,{prefix:(0,v.jsx)(h.A,{}),type:"password",placeholder:"Password"})}),(0,v.jsx)(d.A.Item,{children:(0,v.jsx)(l.A,{justify:"flex-start",align:"center",children:(0,v.jsx)(d.A.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:(0,v.jsx)(a.A,{children:"Remember me"})})})}),(0,v.jsx)(d.A.Item,{style:{width:"100%"},children:(0,v.jsx)(n.Ay,{block:!0,type:"primary",htmlType:"submit",children:"Log in"})})]})})})})]})}},7862:(e,r,s)=>{s.d(r,{A:()=>t});const t={login:"/login",users:"/users",logout:"/logout"}}}]);
//# sourceMappingURL=471.7763d103.chunk.js.map